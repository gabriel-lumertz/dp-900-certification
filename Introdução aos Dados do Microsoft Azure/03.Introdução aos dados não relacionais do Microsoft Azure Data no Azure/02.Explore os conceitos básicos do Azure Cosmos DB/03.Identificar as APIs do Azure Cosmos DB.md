# Identificar as APIs do Azure Cosmos DB

O Azure Cosmos DB é o banco de dados distribuído totalmente gerenciado e sem servidor da Microsoft para aplicativos de qualquer tamanho ou escala, com suporte para cargas de trabalho relacionais e não relacionais. Os desenvolvedores podem criar e migrar aplicativos rapidamente usando seus mecanismos preferidos de banco de dados de código aberto, incluindo PostgreSQL, MongoDB e Apache Cassandra. Ao provisionar uma nova instância do Cosmos DB, você seleciona o mecanismo de banco de dados que deseja usar. A escolha do mecanismo depende de vários fatores, como o tipo de dados a ser armazenado, a necessidade de dar suporte a aplicativos existentes e as habilidades dos desenvolvedores que trabalham com o armazenamento de dados.

## Azure Cosmos DB for NoSQL

O Azure Cosmos DB for NoSQL é o serviço não relacional nativo da Microsoft para trabalhar com o modelo de dados do documento. Ele gerencia dados no formato de documento JSON e, apesar de ser uma solução de armazenamento de dados NoSQL, usa a sintaxe SQL para trabalhar com os dados.

Uma consulta SQL para um banco de dados do Azure Cosmos DB que contém dados do cliente pode ser semelhante a esta:

SQL

```sql
SELECT *
FROM customers c
WHERE c.id = "joe@litware.com"
```

O resultado dessa consulta consiste em um ou mais documentos JSON, como mostrado aqui:

JSON

```json
{
   "id": "joe@litware.com",
   "name": "Joe Jones",
   "address": {
        "street": "1 Main St.",
        "city": "Seattle"
    }
}
```

## Azure Cosmos DB for MongoDB

O MongoDB é um banco de dados de software livre conhecido no qual são armazenados no formato JSON binário (BSON). O Azure Cosmos DB for MongoDB permite que os desenvolvedores usem códigos e bibliotecas de clientes do MongoDB para trabalhar com dados no Azure Cosmos DB.

A MQL (linguagem de consulta do MongoDB) usa uma sintaxe compacta orientada a objeto na qual os desenvolvedores usam *objetos* para chamar *métodos*. Por exemplo, a seguinte consulta usa o método **find** para consultar a coleção **products** no objeto **db**:

JavaScript

```javascript
db.products.find({id: 123})
```

Os resultados dessa consulta consistem em documentos JSON, semelhante a estes:

JSON

```json
{
   "id": 123,
   "name": "Hammer",
   "price": 2.99
}
```

## Azure Cosmos DB for PostgreSQL

O Azure Cosmos DB for PostgreSQL é a opção distribuída do PostgreSQL no Azure. O Azure Cosmos DB for PostgreSQL é um banco de dados relacional nativo do PostgreSQL, distribuído globalmente, que fragmenta dados automaticamente para ajudar você a criar aplicativos altamente escalonáveis. Você pode começar a criar aplicativos em um único grupo de servidores de nó, da mesma maneira que faria com o PostgreSQL em qualquer outro lugar. À medida que os requisitos de escalabilidade e desempenho do seu aplicativo aumentam, você pode escalar perfeitamente para vários nós distribuindo suas tabelas de modo transparente. O PostgreSQL é um RDBMS (sistema de gerenciamento de banco de dados relacional) no qual você define tabelas relacionais de dados. Por exemplo, você pode definir uma tabela de produtos como esta:

| ProductID | ProductName | Preço |
| :-------- | :---------- | :---- |
| 123       | Martelo     | 2,99  |
| 162       | Screwdriver | 3.49  |

Em seguida, você pode consultar essa tabela para recuperar o nome e o preço de um produto específico usando o SQL da seguinte maneira:

SQL

```sql
SELECT ProductName, Price 
FROM Products
WHERE ProductID = 123;
```

Os resultados dessa consulta conterão uma linha para o produto 123, assim:

| ProductName | Preço |
| :---------- | :---- |
| Martelo     | 2,99  |

## Azure Cosmos DB for Table

O Azure Cosmos DB for Table é usado para trabalhar com os dados em tabelas de chave-valor, semelhante ao Armazenamento de Tabelas do Azure. Ele oferece maior escalabilidade e desempenho do que o Armazenamento de Tabelas do Azure. Por exemplo, você pode definir uma tabela chamada Clientes, como esta:

| PartitionKey | RowKey | Nome        | Email               |
| :----------- | :----- | :---------- | :------------------ |
| 1            | 123    | Joe Jones   | joe@litware.com     |
| 1            | 124    | Samir Nadoy | samir@northwind.com |

Em seguida, você pode usar a API de Tabela por meio de um dos SDKs específicos da linguagem para fazer chamadas para o ponto de extremidade de serviço a fim de recuperar dados da tabela. Por exemplo, a solicitação a seguir retorna a linha que contém o registro de *Samir Nadoy* na tabela anterior:

text

```text
https://endpoint/Customers(PartitionKey='1',RowKey='124')
```

## Azure Cosmos DB for Apache Cassandra

O Azure Cosmos DB for Apache Cassandra é compatível com o Apache Cassandra, que é um banco de dados de código aberto popular que usa uma estrutura de armazenamento de famílias de colunas. As famílias de colunas são tabelas, semelhantes àquelas em um banco de dados relacional, com a exceção de que não é obrigatório que cada linha tenha as mesmas colunas.

Por exemplo, você pode criar uma tabela **Funcionários** como esta:

| ID   | Nome         | Gerente      |
| :--- | :----------- | :----------- |
| 1    | Suzana Silva |              |
| 2    | João Neves   | Suzana Silva |

O Cassandra dá suporte a uma sintaxe baseada em SQL, de modo que um aplicativo cliente pode recuperar o registro para *João Neves* desta maneira:

SQL

```sql
SELECT * FROM Employees WHERE ID = 2
```

## Azure Cosmos DB for Apache Gremlin

O Azure Cosmos DB for Apache Gremlin é usado com os dados em uma estrutura de grafo, em que as entidades são definidas como vértices que formam nós no gráfico conectado. Os nós são conectados por bordas que representam relações, desta forma:

![Um gráfico mostrando funcionários e departamentos e as conexões entre eles](https://learn.microsoft.com/pt-br/training/wwl-data-ai/explore-non-relational-data-stores-azure/media/graph.png)

O exemplo na imagem mostra dois tipos de vértice (funcionário e departamento) e bordas que os conectam (o funcionário "João" relata para o funcionário "Suzana", e ambos os funcionários trabalham no departamento "Hardware").

A sintaxe do Gremlin inclui funções para operar em vértices e bordas, permitindo que você insira, atualize, exclua e consulte dados no grafo. Por exemplo, você pode usar o código a seguir para adicionar um novo funcionário chamado *Alice* que relata ao funcionário com a ID **1** (*Suzana*)

apache

```apache
g.addV('employee').property('id', '3').property('firstName', 'Alice')
g.V('3').addE('reports to').to(g.V('1'))
```

A consulta a seguir retorna todos os vértices de *funcionário*, por ordem de ID.

apache

```apache
 g.V().hasLabel('employee').order().by('id')
```